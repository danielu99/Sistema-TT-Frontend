{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Daniel\\\\Documents\\\\Escolar\\\\Programas\\\\Distributed Database\\\\Proyecto Parcial1\\\\ReactJS\\\\tt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import*as d3 from'd3';import{Link}from'react-router-dom';import'../profesor.css';var ProfesorEscoger=/*#__PURE__*/function(_React$Component){_inherits(ProfesorEscoger,_React$Component);function ProfesorEscoger(props){var _this;_classCallCheck(this,ProfesorEscoger);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProfesorEscoger).call(this,props));_this.renderProtocolos=function(_ref){var numeroTT=_ref.numeroTT,nombreTT=_ref.nombreTT;return React.createElement(\"tr\",null,React.createElement(\"td\",null,React.createElement(Link,{to:\"/Profesor/Bienvenido/Asignados\"},React.createElement(\"div\",{id:numeroTT}))),React.createElement(\"td\",null,nombreTT));};_this.state={usuario:_this.props.usuario,protocolos:[],seleccion:''};_this.AgregarProtocolo=_this.AgregarProtocolo.bind(_assertThisInitialized(_this));return _this;}_createClass(ProfesorEscoger,[{key:\"componentDidMount\",value:function componentDidMount(){this.getProtocolos();}},{key:\"getProtocolos\",value:function(){var _getProtocolos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,json,that,a;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:4000/ProtocolosDisponibles\",{method:\"post\",headers:{\"Accept\":\"application/json\",\"Content-type\":\"application/json\"},body:JSON.stringify({usuario:this.state.usuario})}).catch(function(err){return console.error(err);});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;this.setState({protocolos:json.data});that=this;a=d3.selectAll(\"td\").selectAll(\"div\").each(function(){var _this2=this;d3.select(this).text(this.getAttribute(\"id\")).on(\"click\",function(d){that.setState({seleccion:_this2.getAttribute(\"id\")});that.AgregarProtocolo();});});case 9:case\"end\":return _context.stop();}}},_callee,this);}));function getProtocolos(_x){return _getProtocolos.apply(this,arguments);}return getProtocolos;}()},{key:\"AgregarProtocolo\",value:function(){var _AgregarProtocolo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,json;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:4000/AgregarProtocolo\",{method:\"post\",headers:{\"Accept\":\"application/json\",\"Content-type\":\"application/json\"},body:JSON.stringify({usuario:this.state.usuario,protocolo:this.state.seleccion})}).catch(function(err){return console.error(err);});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:json=_context2.sent;if(json.data==1){alert(\"Protocolo añadido correctamente!\");}else{alert(\"Ya evalúas este protocolo!\");}case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function AgregarProtocolo(){return _AgregarProtocolo.apply(this,arguments);}return AgregarProtocolo;}()},{key:\"render\",value:function render(){return React.createElement(\"div\",null,this.Entrega());}},{key:\"Entrega\",value:function Entrega(){if(this.state.protocolos.length<1){return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"No Hay Protocolos Disponibles Para Ti...\"),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"container\"}));}else{return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Trabajos Terminales Disponibles\"),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",null,React.createElement(\"table\",{className:\"tabla\",align:\"center\"},React.createElement(\"tr\",null,React.createElement(\"th\",null,\"NumeroTT\"),React.createElement(\"th\",null,\"NombreTT\")),this.state.protocolos.map(this.renderProtocolos)))));}}}]);return ProfesorEscoger;}(React.Component);export default ProfesorEscoger;","map":{"version":3,"sources":["C:/Users/Daniel/Documents/Escolar/Programas/Distributed Database/Proyecto Parcial1/ReactJS/tt/src/components/ProfesorEscoger.js"],"names":["React","d3","Link","ProfesorEscoger","props","renderProtocolos","numeroTT","nombreTT","state","usuario","protocolos","seleccion","AgregarProtocolo","bind","getProtocolos","event","fetch","method","headers","body","JSON","stringify","catch","err","console","error","response","json","setState","data","that","a","selectAll","each","select","text","getAttribute","on","d","protocolo","alert","Entrega","length","map","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport * as d3 from 'd3'\r\nimport { Link } from 'react-router-dom'\r\nimport '../profesor.css'\r\n\r\n\r\nclass ProfesorEscoger extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            usuario: this.props.usuario,\r\n            protocolos: [],\r\n            seleccion: ''\r\n        }\r\n        this.AgregarProtocolo = this.AgregarProtocolo.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getProtocolos();\r\n    }\r\n\r\n\r\n    async getProtocolos(event) {\r\n        const response = await fetch(\"http://localhost:4000/ProtocolosDisponibles\", {\r\n            method: \"post\",\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                \"Content-type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                usuario: this.state.usuario,\r\n            })\r\n        })\r\n            .catch(err => console.error(err))\r\n        const json = await response.json();\r\n        this.setState({ protocolos: json.data })\r\n\r\n        var that = this\r\n        var a = d3.selectAll(\"td\").selectAll(\"div\").each(function () {\r\n            d3.select(this)\r\n                .text(this.getAttribute(\"id\"))\r\n                .on(\"click\", d => {\r\n                    that.setState({ seleccion: this.getAttribute(\"id\") })\r\n                    that.AgregarProtocolo()\r\n                })\r\n        })\r\n    }\r\n\r\n    async AgregarProtocolo() {\r\n        const response = await fetch(\"http://localhost:4000/AgregarProtocolo\", {\r\n            method: \"post\",\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                \"Content-type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                usuario: this.state.usuario,\r\n                protocolo: this.state.seleccion\r\n            })\r\n        })\r\n            .catch(err => console.error(err))\r\n        const json = await response.json();\r\n\r\n        if (json.data == 1) {\r\n            alert(\"Protocolo añadido correctamente!\")\r\n        }\r\n        else {\r\n            alert(\"Ya evalúas este protocolo!\")\r\n        }\r\n    }\r\n\r\n    renderProtocolos = ({ numeroTT, nombreTT }) =>\r\n        <tr>\r\n            <td>\r\n                <Link to=\"/Profesor/Bienvenido/Asignados\"><div id={numeroTT}></div></Link>\r\n            </td>\r\n            <td>\r\n                {nombreTT}\r\n            </td>\r\n        </tr>\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.Entrega()}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    Entrega() {\r\n        if (this.state.protocolos.length < 1) {\r\n            return (\r\n                <div>\r\n                    <h1>No Hay Protocolos Disponibles Para Ti...</h1><br/>\r\n                    <div className=\"container\">\r\n\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n                <div>\r\n                    <h1>Trabajos Terminales Disponibles</h1><br />\r\n                    <div className=\"container\">\r\n                        <div>\r\n                            <table className=\"tabla\" align=\"center\">\r\n                                <tr>\r\n                                    <th>NumeroTT</th>\r\n                                    <th>NombreTT</th>\r\n                                </tr>\r\n                                {this.state.protocolos.map(this.renderProtocolos)}\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default ProfesorEscoger"]},"metadata":{},"sourceType":"module"}